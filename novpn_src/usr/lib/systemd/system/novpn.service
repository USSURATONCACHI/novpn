[Unit]
Description=CLI tool to easily run programs on a specific network device.
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot

ExecStartPre=/usr/bin/novpn_ns wait_for_device
ExecStart=/usr/bin/novpn_ns up
ExecStartPost=/usr/bin/systemctl start novpn_keepalive.timer

ExecStop=/bin/bash -c "/usr/bin/systemctl stop novpn_keepalive.timer && /usr/bin/novpn_ns down"
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
